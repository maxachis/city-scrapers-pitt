(window.wpSpeechstreamToolbar=window.wpSpeechstreamToolbar||[]).push([[2],{149:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i="th_toolbar"},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(17),a=[{DEFAULT_WORD_STYLE:"color:#FFFFFF; background:#009; padding: 2px; margin: -2px; border-radius: 4px; position:relative",DEFAULT_SENTENCE_STYLE:"color:#009; background:#FFFF00"},{DEFAULT_WORD_STYLE:"color:#000; background:#FFFF00; padding: 2px; margin: -2px; border-radius: 4px; position:relative",DEFAULT_SENTENCE_STYLE:"color:#FFFF00; background:#000"},{DEFAULT_WORD_STYLE:"color:#6cf; background:#009; padding: 2px; margin: -2px; border-radius: 4px; position:relative",DEFAULT_SENTENCE_STYLE:"color:#009; background:#6cf"},{DEFAULT_WORD_STYLE:"color:#cc9; background:#009; padding: 2px; margin: -2px; border-radius: 4px; position:relative",DEFAULT_SENTENCE_STYLE:"color:#009; background:#cc9"}],s={currentVoice:"Ava",speed:40,saveSettings:!0,translateSource:"en-gb",translateDestination:"es-es",wordHighlightStyle:a[0].DEFAULT_WORD_STYLE,sentenceHighlightStyle:a[0].DEFAULT_SENTENCE_STYLE,highlightStyleId:0,announceLinks:!1,announceLinksWord:"link",screenMaskType:"LetterBox",backgroundColor:"#000000",backgroundOpacity:50,readingLightHeight:100,readingLightColor:"#ffffff",readingLightOpacity:0,readingLightVisibility:!0,screenMaskingActive:!1,textMagnifierSize:0,clickToSpeak:!0,continuousSpeechEnabled:!0,toolbarTheme:0,pictureDictionaryLanguage:"en-gb",settingsLoaded:!1,init:function(e){this.saveSettings=!1,this.setVoice(e.speechSettings.defaultVoice),this.setAnnounceLinksWord(e.speechSettings.announceLinksWord),this.setAnnounceLinks(e.speechSettings.announceLinks),this.setWordHighlightStyle(e.speechSettings.wordHighlightStyle||0),this.setSentenceHighlightStyle(e.speechSettings.sentenceHighlightStyle||0),this.setClickToSpeak(e.speechSettings.clickToSpeak),this.setContinuousSpeechEnabled(e.speechSettings.continuousSpeechEnabled),this.setPictureDictionaryLanguage(e.translate.translateSource),this.setTranslationSource(e.translate.translateSource),this.setTranslationDestination(e.translate.translateDestination),this.setScreenMaskType(e.screenMaskType),this.setScreenMaskSize(e.screenMaskSize),this.setScreenMaskColour(e.screenMaskColour),this.setScreenMaskOpacity(e.screenMaskOpacity),this.setBackgroundColour(e.backgroundColour),this.setBackgroundOpacity(e.backgroundOpacity),this.setReadingLightHeight(e.readingHeight),this.setReadingLightColour(e.readingColour),this.setReadingLightOpacity(e.readingOpacity),this.setReadingLightVisibility(e.readingLightVisibility),this.setToolbarTheme(e.toolbartheme),this.setTextMagnifierSize(e.textMagnifierSize),this.saveSettings=e.saveSettings||!0,this.saveSettings&&(this.load(e),this.save()),this.settingsLoaded=!0},getSettingsLoaded:function(){return this.settingsLoaded},setTextMagnifierSize:function(e){this.textMagnifierSize=e,this.save()},getTextMagnifierSize:function(){return this.textMagnifierSize},setBackgroundColour:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#000000";this.backgroundColor=e,this.save()},getBackgroundColour:function(){return this.backgroundColor},setBackgroundOpacity:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50;this.backgroundOpacity=e,this.save()},getBackgroundOpacity:function(){return this.backgroundOpacity},setReadingLightHeight:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;this.readingLightHeight=e,this.save()},getReadingLightHeight:function(){return this.readingLightHeight},setReadingLightColour:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#ffffff";this.readingLightColor=e,this.save()},getReadingLightColour:function(){return this.readingLightColor},setReadingLightOpacity:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.readingLightOpacity=e,this.save()},getReadingLightOpacity:function(){return this.readingLightOpacity},setReadingLightVisibility:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.readingLightVisibility=e,this.save()},getReadingLightVisibility:function(){return this.readingLightVisibility},setScreenMaskOpacity:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.25;1<e&&(e/=100),this.screenMaskOpacity=e,this.save()},getScreenMaskOpacity:function(){return this.screenMaskOpacity},setScreenMaskColour:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"rgb(17, 17, 17)";this.screenMaskColour=e,this.save()},getScreenMaskColour:function(){return this.screenMaskColour},setScreenMaskSize:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"800px";this.screenMaskSize=e+"px",this.save()},getScreenMaskSize:function(){return this.screenMaskSize},setScreenMaskType:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"LetterBox";"LetterBox"!=e&&"Ruler"!=e&&(e="LetterBox"),this.screenMaskType=e,this.save()},getScreenMaskType:function(){return this.screenMaskType},setToolbarTheme:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.toolbarTheme=e,this.save()},getToolbarTheme:function(){return this.toolbarTheme},setPictureDictionaryLanguage:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"en-gb";void 0===i.a[e]&&(e="en-gb"),this.pictureDictionaryLanguage=e,this.save()},getPictureDictionaryLanguage:function(){return i.a[this.pictureDictionaryLanguage]},setTranslationSource:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"en-gb";void 0===i.a[e]&&(e="en-gb"),this.translateSource=e,this.save()},getTranslationSource:function(){return i.a[this.translateSource]},setTranslationDestination:function(e){void 0===i.a[e]&&(e="es-es"),this.translateDestination=e,this.save()},getTranslationDestination:function(){return i.a[this.translateDestination]},getTranslationList:function(){return i.a},setAnnounceLinksWord:function(e){this.announceLinksWord=e,this.save()},getAnnounceLinksWord:function(){return this.announceLinksWord},setAnnounceLinks:function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];this.announceLinks=e,this.save()},getAnnounceLinks:function(){return this.announceLinks},setSentenceHighlightStyle:function(e){this.sentenceHighlightStyle="number"==typeof e?a[e].DEFAULT_SENTENCE_STYLE:e,this.highlightStyleId=e,this.save()},getSentenceHighlightStyle:function(){return this.sentenceHighlightStyle||a[0].DEFAULT_SENTENCE_STYLE},setWordHighlightStyle:function(e){this.wordHighlightStyle="number"==typeof e?a[e].DEFAULT_WORD_STYLE:e,this.highlightStyleId=e,this.save()},getWordHighlightStyle:function(){return this.wordHighlightStyle||a[0].DEFAULT_WORD_STYLE},getHighlightId:function(){return this.highlightStyleId},setHighlightId:function(e){this.setSentenceHighlightStyle(e),this.setWordHighlightStyle(e)},setVoiceSpeed:function(e){this.speed=e,this.save()},getVoiceSpeed:function(){return this.speed},setVoice:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Ava";this.currentVoice=e,this.save()},getVoice:function(){return this.currentVoice},setClickToSpeak:function(e){this.clickToSpeak=e,this.save()},getClickToSpeak:function(){return this.clickToSpeak},setContinuousSpeechEnabled:function(e){this.continuousSpeechEnabled=e,this.save()},getContinuousSpeechEnabled:function(){return this.continuousSpeechEnabled},save:function(){this.saveSettings&&"undefined"!=typeof localStorage&&localStorage.setItem("API_SETTINGS_V2",JSON.stringify(this))},load:function(e){if("undefined"!=typeof localStorage){var t=localStorage.getItem("API_SETTINGS_V2"),n=JSON.parse(t);for(var s in n)switch(s){case"currentVoice":if(void 0!==n[s]&&e.toolbarButtons.includes("translate"))!!(0<document.getElementsByClassName("thpdfviewer").length)||(this[s]=n[s]);break;case"announceLinksWord":case"speed":void 0!==n[s]&&(this[s]=n[s]);break;case"highlightStyleId":"number"==typeof n[s]&&(this[s]=n[s]);break;case"backgroundOpacity":case"readingLightHeight":void 0!==n[s]&&(this[s]=n[s]);break;case"readingLightOpacity":"stnumberring"==typeof n[s]&&(this[s]=n[s]);break;case"textMagnifierSize":case"toolbarTheme":case"announceLinks":case"saveSettings":case"readingLightVisibility":case"screenMaskingActive":case"clickToSpeak":void 0!==n[s]&&(this[s]=n[s]);break;case"continuousSpeechEnabled":break;case"translateSource":if(void 0!==n[s])!!(0<document.getElementsByClassName("thpdfviewer").length)||(this[s]=n[s]);break;case"translateDestination":if(void 0!==n[s])!!(0<document.getElementsByClassName("thpdfviewer").length)||(this[s]=n[s]);break;case"pictureDictionaryLanguage":if(void 0!==n[s])if(e.toolbarButtons.includes("translate")){var o=n[s];void 0===i.a[o]&&(o="en-gb"),this[s]=o}else this[s];break;case"backgroundColor":void 0!==n[s]&&(this[s]=n[s]);break;case"readingLightColor":void 0!==n[s]&&null!=n[s].match(/#[a-z|0-9]{6}$/i)&&(this[s]=n[s]);break;case"wordHighlightStyle":for(var r=0;r<a.length;r++)if(n[s]==a[r].DEFAULT_WORD_STYLE){this[s]=n[s];break}break;case"sentenceHighlightStyle":for(var c=0;c<a.length;c++)if(n[s]==a[c].DEFAULT_SENTENCE_STYLE){this[s]=n[s];break}}}},TurnOffSave:function(){this.saveSettings=!1,localStorage.removeItem("API_SETTINGS_V2")},TurnOnSave:function(){this.saveSettings=!0}}},150:function(e,t,n){"use strict";function i(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}n.d(t,"a",(function(){return a}));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"rw_decodeFromStorage",value:function(e){var t,n,i,a=decodeURIComponent(e),s="",o=a.length;for(t=0;t<o;t++){var r=a.charAt(t);if("/"==r){if(t<o-1)switch(a.charAt(t+1)){case"/":s+="/",t++;break;case"x":t<o-3&&(n=a.substr(t+2,2),i=this.h2d(n),s+=String.fromCharCode(i),t+=3);break;case"u":t<o-5&&(n=a.substr(t+2,4),i=this.h2d(n),s+=String.fromCharCode(i),t+=5)}}else"+"==r?s+=" ":10==r||13==r||("%"==r?t<o-2?"%2f"==(n=a.substr(t,3))?(s+="/",t+=2):"%2a"==n?(s+=":",t-=2):"%60"==n?(s+="`",t-=2):t<o-9?"%26quot%3b"==(n=a.substr(t,10))?(s+='"',t+=9):t<o-6?"%26quot"==(n=a.substr(t,7))?(s+='"',t+=6):s+=r:s+=r:s+=r:s+=r:"&"==r?t<o-5&&("&#x27"==(n=a.substr(t,6))?s+="'":"&quot;"==n&&(s+='"'),s+=String.fromCharCode(i),t+=5):s+=a.charAt(t))}return s}},{key:"h2d",value:function(e){return parseInt(e,16)}},{key:"d2h",value:function(e){return e.toString(16)}}]),e}()},5:function(e,t,n){"use strict";n.r(t),n.d(t,"Api",(function(){return P}));var i=n(176),a=n(177),s=n(149),o=n(15),r=n(6);function c(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var l=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),window[n].Api=this,this.htmlParser=t.htmlparser}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(e,[{key:"disableSaveSettings",value:function(e){e?(o.a.TurnOffSave(),r.a.TurnOffSave()):(o.a.TurnOnSave(),r.a.TurnOnSave())}}]),e}(),u=n(17);function h(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var g="First_use_only",d="Always_on",f=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(e,[{key:"launch",value:function(e,t){var n=this;if(!(t.isMobile||this.isSafari||t.audioalert!=d&&t.audioalert!=g)){if(t.audioalert==g&&this.hasItRun())return;var i=setInterval((function(){o.a.getSettingsLoaded()&&(null!=t.audioalertcusttext&&""!=t.audioalertcusttext?e.speakWithOutHighlight([t.audioalertcusttext]):e.speakWithOutHighlight([t.locale.audioalert]),n.saveFirstRun(),clearInterval(i))}),100)}}},{key:"saveFirstRun",value:function(){"undefined"!=typeof localStorage&&localStorage.setItem("audioalert",JSON.stringify({audioalert:!0}))}},{key:"hasItRun",value:function(){if("undefined"!=typeof localStorage){var e=localStorage.getItem("audioalert");return null!=e&&JSON.parse(e).audioalert}}}]),e}();function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,n,i,a,s,o){try{var r=e[s](o),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){function s(e){S(r,i,a,s,o,"next",e)}function o(e){S(r,i,a,s,o,"throw",e)}var r=e.apply(t,n);s(void 0)}))}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){function t(){var e,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(k(this,t),(e=i.call(this)).server=a.speechSettings.pronunciationDns||"pronunciation.speechstream.net",e._custId=a.speechSettings.custId,e._username=a.speechSettings.username,e._bookId=a.speechSettings.bookId,e._pageId=a.speechSettings.pageId,e._data=[],e.paths=[],e.docket=a.toolbarConfig.docked,e.contractId=a.contractId||null,e.locale=null,n.e(194).then(n.t.bind(null,284,3)).then((function(t){e.setData(t.default)})),null!=e.contractId){var s=P.getTranslateSource().spokenLang||null;null!=s&&(e.locale=-1==["en-au","de-de","nl-nl","nl-de","no-no","sv-se","sv","en-gb","en-us"].indexOf(s)?null:s,"en-au"==e.locale&&(e.locale="au"),"de-de"==e.locale&&(e.locale="de"),("nl-de"==e.locale||"nl-nl"==e.locale)&&(e.locale="nl"),"no-no"==e.locale&&(e.locale="no"),("sv-se"==e.locale||"sv"==e.locale)&&(e.locale="se"),("en-gb"==e.locale||"en-ie"==e.locale||"en-sc"==e.locale||"en-gb-wls"==e.locale||"en-in"==e.locale)&&(e.locale="uk"),"en-us"==e.locale&&(e.locale="us")),e.setPathsBA()}else e.setPathsSS();return e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e);var i=T(t);return function(e,t,n){t&&y(e.prototype,t),n&&y(e,n)}(t,[{key:"setPathsBA",value:function(){this.paths.push("js/prons/".concat(this.contractId,".json")),null!=this.locale&&this.paths.push("js/prons/".concat(this.locale,".json"))}},{key:"setPathsSS",value:function(){this.paths.push("".concat(this._username,"/").concat(this._custId,"/").concat(this._bookId,"/*/prons.json")),this.paths.push("".concat(this._username,"/").concat(this._custId,"/").concat(this._bookId,"/").concat(this._pageId,"/prons.json"));var e=document.querySelectorAll('[texthelpcmd^="pageid"]');if(null!=e)for(var t,n=0;n<e.length;n++)if(null!=(t=e[n].attributes.texthelpcmd.value)){var i=t.indexOf(":");-1<i&&this.paths.push("".concat(this._username,"/").concat(this._custId,"/").concat(this._bookId,"/").concat(t.substr(i+1),"/prons.json"))}}},{key:"getPronunciations",value:function(){return this._data}},{key:"setData",value:function(e){for(var t=0;t<e.length;t++)e[t].saythis=this.rw_decodeFromStorage(e[t].saythis),e[t].likethis=this.rw_decodeFromStorage(e[t].likethis),this._data.push(e[t])}},{key:"get",value:function(){var e=v((function*(){var e=this,t=this.paths;yield Promise.all(t.map(function(){var t=v((function*(t){var n="https://"+e.server+"/"+t;return e.send(n).then((function(t){e.setData(t)})).catch((function(){}))}));return function(){return t.apply(this,arguments)}}()))}));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(e){return fetch(e,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"},mode:"cors",cache:"no-cache",credentials:"same-origin"}).then((function(e){return e.json()})).catch((function(){}))}},{key:"custId",get:function(){return this._custId},set:function(e){this._custId=e}},{key:"username",get:function(){return this._username},set:function(e){this._username=e}},{key:"bookId",get:function(){return this._bookId},set:function(e){this._bookId=e}},{key:"pageId",get:function(){return this._pageId},set:function(e){this._pageId=e}}]),t}(n(150).a),O=n(8),E=n(7);function C(e,t,n,i,a,s,o){try{var r=e[s](o),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,a)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){function s(e){C(r,i,a,s,o,"next",e)}function o(e){C(r,i,a,s,o,"throw",e)}var r=e.apply(t,n);s(void 0)}))}}var P={htmlparser:null,user:"",speechDns:"",Speech:null,highlightsApi:null,notesApi:null,screenMask:null,textMagnifier:null,translateApi:null,simplify:null,globalFunctions:null,pdfRedirect:null,pronunciationApi:null,pronunciationEditApi:null,locale:"uk",audioAlert:new f,playAudioAlertOnLoad:!1,translateFinishedCallback:null,updateLocale:null,analytics:null,initialized:!1,isBA:!0,init:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!this.initialized){this.initialized=!0,this.config=e;var n=this.config.toolbarButtons;void 0!==this.config.disable_ga&&!this.config.disable_ga&&this.config.trackingCode&&this.isBA?this.loadBrowsealoudAnalytics(this.config.trackingCode):this.loadSpeechstreamAnalytics(this.config.trackingCode),(n.includes("translate")&&this.config.translate.translatePage||n.includes("highlights")||n.includes("stickynotes"))&&(this.config.htmlParser.tagPage=!0,this.config.htmlParser.tagClass="thsentence"),this.htmlparser=new i.a(this.config.htmlParser),this.speechDns=e.speechDns||"speech.speechstream.net",this.user=e.user||"",this.setupConfig(),void 0!==e.langId&&this.getLocale(e.langId),t||this.toolbarLoaded()}},loadBrowsealoudAnalytics:function(e){var t=this;return I((function*(){var i=yield n.e(168).then(n.bind(null,271));t.analytics=new i.BrowsealoudAnalytics(e)}))()},loadSpeechstreamAnalytics:function(e){var t=this;return I((function*(){var i=yield n.e(175).then(n.bind(null,272));t.analytics=new i.SpeechstreamAnalytics(t.config,e)}))()},toolbarLoaded:function(){var e=this;return I((function*(){o.a.init(e.config);for(var t=e.config.toolbarButtons,n=!1,i=0;i<t.length;i++)switch(t[i]){case"play":case"hover":case"clicktospeak":case"stop":case"pause":n||(null==e.Speech&&e.loadSpeechModule(),!t.includes("prons")&&e.loadPronunciations(),n=!0);break;case"translate":yield e.loadTranslate(),e.translateApi.init().then((function(){var t=o.a.getTranslationDestination().spokenLang||o.a.getTranslationDestination().glang;"function"==typeof e.translateFinishedCallback&&e.setTransFinishedCallback(e.translateFinishedCallback),e.config.translate.translatePage&&t!=e.config.translate.translateDestination&&P.transPage()}));break;case"dictionary":e.loadDictionary();break;case"picturedict":e.loadPictureDictionary();break;case"mp3":e.loadMp3();break;case"screenmask":e.screenMask||e.loadScreenMask();break;case"textticker":break;case"simplify":e.loadSimplify();break;case"stickynotes":e.loadNotes();break;case"highlights":e.loadHighlights();break;case"pdf":e.loadPDF();break;case"prons":e.loadPronunciationsEdit()}if(void 0!==e.config.globalFunctions&&void 0!==e.config.globalFunctions.windowsScope&&""!=e.config.globalFunctions.windowsScope&&(e.globalFunctions=new l(P,e.config.globalFunctions.windowsScope)),void 0!==e.config.disable_cookies&&e.config.disable_cookies)var a=setInterval((function(){e.globalFunctions&&(e.globalFunctions.disableSaveSettings(!0),clearInterval(a))}),100)}))()},setupConfig:function(){var e=this.getVoiceFromSpeechRules(),t=u.a;if(null!=e)this.config.speechSettings.defaultVoice=void 0===e.voice?e.defaultVoice:e.voice;else if(null!==this.config.langId&&""!==this.config.langId)for(var n in t)if(t[n].id==this.config.langId){this.config.speechSettings.defaultVoice=void 0===t[n].voice?t[n].defaultVoice:t[n].voice,this.config.translate.translateSource=n,this.config.translate.translateDestination=n;break}if(null!=this.config.speechSettings.usePageLangTag&&void 0!==this.config.speechSettings.usePageLangTag&&this.config.speechSettings.usePageLangTag){var i=this.htmlparser.getDocumentLanguage();if(null!==i&&""!==i)if(null==t[i]||void 0===t[i]){for(var a in t)if(t[a].glang==i&&t[a].spokenLang){this.config.speechSettings.defaultVoice=void 0===t[a].voice?t[a].defaultVoice:t[a].voice;break}}else this.config.speechSettings.defaultVoice=void 0===t[i].voice?t[i].defaultVoice:t[i].voice,this.config.speechSettings.defaultVoice=void 0===i.voice?t[i].defaultVoice:t[i].voice}},getLocale:function(e){for(var t in this.locale=null,u.a)if(u.a[t].id==e){var n=u.a[t].spokenLang.split("-");if(2==n.length){this.locale="gb"==n[1]?"uk":n[1],this.config.lang=this.locale;break}this.locale=n[0],this.config.lang=this.locale;break}},transPDF:function(){for(var e,t,n,i=this,a=window.location.hash.replace("#","").split("&"),s=0;s<a.length;s++)try{-1==a[s].indexOf("langidsrc=")?-1==a[s].indexOf("locale=")?-1!=a[s].indexOf("langiddest=")&&(n=a[s].split("=")[1]):t=a[s].split("=")[1]:e=a[s].split("=")[1]}catch(e){}"undefined"==typeof BrowseAloud&&(window.BrowseAloud={}),e=u.a[e],n=u.a[n],null!=e&&null!=t&&null!=n?(BrowseAloud.translate={sourceLangObj:e,targetLangObj:n,sourceLang:e.spokenLang||e.glang,targetLang:n.spokenLang||n.glang},this.config.translate.translateSource=e.spokenLang||e.glang,this.config.translate.translateDestination=n.spokenLang||n.glang,this.config.locale.id!=n.id&&"function"==typeof this.updateLocale&&this.updateLocale(n.id)):BrowseAloud.translate={sourceLangObj:this.getTranslateSource(),targetLangObj:this.getTranslateDestination(),sourceLang:this.getTranslateSource().spokenLang||this.getTranslateSource().glang,targetLang:this.getTranslateDestination().spokenLang||this.getTranslateDestination().glang},BrowseAloud.toolbar={translate:{setState:function(e){BrowseAloud.toolbar.status=e}},state:{waiting:"waiting",on:"on",off:"off"},settings:{settingsActive:!1,isHelpOpen:!1}},BrowseAloud.pdf={settings:{isPromptOpen:!1}},BrowseAloud.util={getPageLanguage:function(){return BrowseAloud.translate.targetLangObj},startsWith:function(e,t){return!(e.charAt(0)!=t)},endsWith:function(e,t){return!(e.charAt(e.length-1)!=t)}};var o=setInterval((function(){i.config.translate.translatePage?i.translateApi&&(i.transPage(),clearInterval(o)):clearInterval(o)}),1e3)},_registerNotesCallback:function(){this.notesApi.setCallbackFunctions(this.callbackOpen,this.callbackClose)},setNotesCallback:function(e,t){this.callbackOpen=e,this.callbackClose=t},loadPDF:function(){var e=this;return I((function*(){var t=yield n.e(173).then(n.bind(null,273));e.pdfRedirect=new t.PDFRedirect(e.config.pdf||{})}))()},loadSimplify:function(){var e=this;Promise.all([n.e(136),n.e(174)]).then(n.bind(null,274)).then((function(t){e.simplify=new t.SimplifyPage(e.config.simplifySettings)}))},loadScreenMask:function(){var e=this;return I((function*(){var t=yield n.e(138).then(n.bind(null,320));e.screenMask=new t.ScreenMask,e.screenMask.setBackgroundColour(o.a.getBackgroundColour()),e.screenMask.setBackgroundOpacity(o.a.getBackgroundOpacity()),e.screenMask.setReadingLightHeight(o.a.getReadingLightHeight()),e.screenMask.setReadingLightColour(o.a.getReadingLightColour()),e.screenMask.setReadingLightOpacity(o.a.getReadingLightOpacity()),e.screenMask.setReadingLightVisibility(o.a.getReadingLightVisibility());try{var i=parseInt(document.body.style.top)||0;0<i&&e.screenMask.setDocumentBodyTop(i)}catch(e){}}))()},loadSpeechModule:function(){var e=this;return I((function*(){e.config.speechSettings.ignoreToolbarId=s.a,e.Speech=new a.a(e.config.speechSettings,e.htmlparser);var t=setInterval((function(){o.a.getSettingsLoaded()&&(e.Speech.setVoice(o.a.getVoice()),e.Speech.setVoiceSpeed(o.a.getVoiceSpeed()),e.htmlparser.setWordHighlightStyle(o.a.getWordHighlightStyle(0)),e.htmlparser.setSentenceHighlightStyle(o.a.getSentenceHighlightStyle(0)),e.Speech.setContinuousSpeechEnabled(o.a.getContinuousSpeechEnabled()),e.htmlparser.setAnnounceLinksAsWords(o.a.getAnnounceLinksWord()),e.playAudioAlertOnLoad&&e.audioAlert.launch(e.Speech,e.config),clearInterval(t))}),100);if(void 0!==e.config.censoredWords&&e.config.censoredWords.enabled){var i=yield n.e(169).then(n.bind(null,275));e.censoredWords=new i.CensoredWords(e.config.censoredWords);for(var r=e.censoredWords.getWords(),c=0;c<r.length;c++)e.Speech.addPronunciations(r[c],"censored")}}))()},loadPronunciationsEdit:function(){var e=this;return I((function*(){var t=yield Promise.all([n.e(132),n.e(170)]).then(n.bind(null,276));e.pronunciationEditApi=new t.EditPronunciationApi(e.config),yield e.pronunciationEditApi.getFromDB();for(var i=e.pronunciationEditApi.getPronunciations(),a=0;a<i.length;a++)e.Speech.addPronunciations(i[a].saythis,i[a].likethis)}))()},loadPronunciations:function(){var e=this;return I((function*(){e.pronunciationApi=new m(e.config),yield e.pronunciationApi.get();for(var t=e.pronunciationApi.getPronunciations(),n=0;n<t.length;n++)e.Speech.addPronunciations(t[n].saythis,t[n].likethis)}))()},loadPictureDictionary:function(){var e=this;n.e(152).then(n.bind(null,277)).then((function(t){e.pictureDictionary=new t.PictureDictionary(e.htmlparser,e.config.pictureDictionary),e.pictureDictionary.setLanguage(o.a.getPictureDictionaryLanguage())}))},loadDictionary:function(){var e=this;n.e(151).then(n.bind(null,278)).then((function(t){e.dictionary=new t.Dictionary(e.htmlparser,e.config.webuser,e.config.webdns)}))},loadTranslate:function(){var e=this;return I((function*(){e.config.isPdf&&e.config.translate.translatePage&&(e.transPDF(),e.loadTranslateBatch());var t=Promise.all([n.e(126),n.e(193),n.e(176)]).then(n.bind(null,279)),i=yield t;if(e.translateApi=new i.Translate(e.htmlparser,e.config.translate),e.config.isPdf&&e.config.translate.translatePage){var a=u.a[e.config.translate.translateSource],s=u.a[e.config.translate.translateDestination];null!=a&&null!=s&&(e.setTranslationDestination(BrowseAloud.translate.targetLang),e.setTranslationSource(BrowseAloud.translate.sourceLang))}else e.translateApi.setFrom(o.a.getTranslationSource()),e.translateApi.setTo(o.a.getTranslationDestination());var r=setInterval((function(){e.pdfRedirect&&(e.pdfRedirect.setFromLanguage(o.a.getTranslationSource()),e.pdfRedirect.setToLanguage(o.a.getTranslationDestination()),clearInterval(r))}),100)}))()},loadTranslateBatch:function(){var e=this;return I((function*(){var t=n.e(177).then(n.bind(null,280)),i=yield t;BrowseAloud.translateBatch=new i.TranslateBatch(e.config.translate)}))()},getVoiceFromSpeechRules:function(){if(null!=this.config.speechSettings.speechRules&&void 0!==this.config.speechSettings.speechRules)for(var e=this.config.speechSettings.speechRules,t="",n=0;n<e.length;n++){t=(t=(t=e[n].p.toLowerCase()).replace(/\*/g,"(.+)")).replace(/[\-\[\]\/\{}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var i=new RegExp(t);if(document.URL.toLowerCase().match(i)){var a=u.a;for(var s in a)if(a[s].id==e[n].t)return a[s]}}return null},loadMp3:function(){var e=this;n.e(178).then(n.bind(null,281)).then((function(t){e.mp3Controls=new t.mp3Controls(e.htmlparser,e.config)}))},loadHighlights:function(){var e=this;n.e(171).then(n.bind(null,282)).then((function(t){e.highlightsApi=new t.HighlightsApi(e.htmlparser,e.config),e.highlightsApi.getHighlights()})),n.e(187).then(n.t.bind(null,156,7)),n.e(184).then(n.t.bind(null,157,7)),n.e(186).then(n.t.bind(null,158,7)),n.e(188).then(n.t.bind(null,159,7)),n.e(185).then(n.t.bind(null,160,7)),n.e(183).then(n.t.bind(null,161,7)),n.e(127).then(n.t.bind(null,28,7))},loadNotes:function(){var e=this;n.e(172).then(n.bind(null,283)).then((function(t){e.notesApi=new t.NotesApi(e.htmlparser,e.config.notes),e.notesApi.getNotes(),e._registerNotesCallback()}))},resetTranslate:function(e){this.translateApi.resetToOriginalLang(e);var t=this.translateApi.getVoice();this.config.isPdf&&(BrowseAloud.translate={sourceLangObj:this.getTranslateSource(),targetLangObj:this.translateApi.to,sourceLang:this.getTranslateSource().glang,targetLang:this.translateApi.to.glang},TextHelpTranslation.reset()),""!=t&&(this.setVoice(t),this.Speech.setTranslateVoice(t)),this.pdfRedirect&&this.pdfRedirect.pageIsTranslated(this.translateApi.isPageTranslated())},transPage:function(e){this.translateApi.transPage(e);var t=this.translateApi.getVoice();this.config.isPdf&&(BrowseAloud.translate={sourceLangObj:this.getTranslateSource(),targetLangObj:this.translateApi.to,sourceLang:this.getTranslateSource().glang,targetLang:this.translateApi.to.glang},TextHelpTranslation.reset(),this.translateApi.to.glang!=this.translateApi.from.glang&&TextHelpTranslation.translatePages(!1)),""!=t&&(this.setVoice(t),this.Speech.setTranslateVoice(t)),this.pdfRedirect&&this.pdfRedirect.pageIsTranslated(this.translateApi.isPageTranslated())},translate:function(e){this.translateApi.translate(e);var t=this.translateApi.getVoice();""!=t&&this.Speech.setVoice(t)},setTranslationSource:function(e){o.a.setTranslationSource(e),this.translateApi&&this.translateApi.setFrom(o.a.getTranslationSource()),this.pdfRedirect&&this.pdfRedirect.setFromLanguage(o.a.getTranslationSource())},getTranslateSource:function(){return o.a.getTranslationSource()},getTranslationList:function(){return o.a.getTranslationList()},setTranslationDestination:function(e){o.a.setTranslationDestination(e);var t=o.a.getTranslationDestination(),n=o.a.getTranslationSource(),i="Change ".concat(n.glang.toUpperCase()," - ").concat(t.glang.toUpperCase());this.logAnalytics({event:"Translate",action:i}),this.translateApi.setTo(t),this.config.pictureDictionary.setLangFromTranslate&&this.config.translate.translatePage&&this.setPictureDictionaryLanguage(e),this.pdfRedirect&&this.pdfRedirect.setToLanguage(t)},storeUpdateLocale:function(e){this.updateLocale=e},storeTransFinishedCallback:function(e){this.translateFinishedCallback=e},setTransFinishedCallback:function(e){this.translateApi.setFinishedCallback(e)},getTranslateDestination:function(){return o.a.getTranslationDestination()},setPictureDictionaryLanguage:function(e){null!=this.pictureDictionary&&(o.a.setPictureDictionaryLanguage(e),this.pictureDictionary.setLanguage(o.a.getPictureDictionaryLanguage()))},getPictureDictionaryLanguage:function(){return o.a.getPictureDictionaryLanguage()},playAudioAlert:function(){null!=this.audioAlert&&null!=this.Speech?this.audioAlert.launch(this.Speech,this.config):this.playAudioAlertOnLoad=!0},play:function(){var e=null;null!=this.translateApi&&this.translateApi.pageTranslated&&(e=this.translateApi.getVoice()),this.Speech.play(e)},clickToSpeak:function(e){this.Speech.clickToSpeak(e)},hoverSpeak:function(e){this.Speech.hoverSpeak(e)},stop:function(){this.Speech.stop()},pause:function(){this.Speech.pause()},hoverSpeakOnOff:function(){var e=null;this.Speech.hoverSpeakOnOff(),null!=this.translateApi&&this.translateApi.pageTranslated&&(e=this.translateApi.getVoice(),this.Speech.setVoice(e))},clickToSpeakOnOff:function(){var e=null;this.Speech.clickToSpeakOnOff(),null!=this.translateApi&&this.translateApi.pageTranslated&&(e=this.translateApi.getVoice(),this.Speech.setVoice(e))},hoverSpeakOnOffOnLoad:function(){var e=this,t=setInterval((function(){if(e.Speech){var n=null;e.Speech.hoverSpeakOnOff(),clearInterval(t),null!=e.translateApi&&e.translateApi.pageTranslated&&(n=e.translateApi.getVoice(),e.Speech.setVoice(n))}}),100)},clickToSpeakOnOffOnLoad:function(){var e=this,t=setInterval((function(){if(e.Speech){var n=null;e.Speech.clickToSpeakOnOff(),clearInterval(t),null!=e.translateApi&&e.translateApi.pageTranslated&&(n=e.translateApi.getVoice(),e.Speech.setVoice(n))}}),100)},speakById:function(e,t){E.a.publish("analytics",{event:"Speech",action:O.a.SPEAKBYID_BUTTON}),this.Speech.speakById(e,t)},speakWithOutHighlight:function(e,t){this.Speech.speakWithOutHighlight(e,t)},setClickToSpeak:function(e){o.a.setClickToSpeak(e)},getClickToSpeak:function(){return o.a.getClickToSpeak()},setAnnounceLinksWord:function(e){o.a.setAnnounceLinksWord(e),this.htmlparser.setAnnounceLinksAsWords(e)},getAnnounceLinksWord:function(){return o.a.getAnnounceLinksWord()},addPronunciation:function(e,t,n,i,a){var s=this;this.pronunciationEditApi.add(e,t,n,(function(){s.Speech.addPronunciations(t,n),i()}),a)},updatePronunciation:function(e,t,n,i,a){var s=this;this.pronunciationEditApi.update(e,t,n,(function(){s.Speech.updatePronunciations(t,n),i("Pronunciation updated")}),a)},deletePronunciation:function(e,t,n,i,a){var s=this;this.pronunciationEditApi.delete(e,t,n,(function(){s.Speech.deletePronunciations(t,n),i("Pronunciation deleted")}),a)},setToolbarTheme:function(e){o.a.setToolbarTheme(e)},getToolbarTheme:function(){return o.a.getToolbarTheme()},getHighlightId:function(){return o.a.getHighlightId()},setHighlightId:function(e){this.setSentenceHighlightStyle(e),this.setWordHighlightStyle(e)},setSentenceHighlightStyle:function(e){o.a.setSentenceHighlightStyle(e);var t=o.a.getSentenceHighlightStyle();this.htmlparser.setSentenceHighlightStyle(t)},getSentenceHighlightStyle:function(){return o.a.getSentenceHighlightStyle()},setWordHighlightStyle:function(e){o.a.setWordHighlightStyle(e);var t=o.a.getWordHighlightStyle();this.htmlparser.setWordHighlightStyle(t)},getWordHighlightStyle:function(){return o.a.getWordHighlightStyle()},getVoice:function(){return o.a.getVoice()},setVoice:function(e){o.a.setVoice(e),null!=this.Speech&&this.Speech.setVoice(e),null!=this.mp3Controls&&this.mp3Controls.setVoice(e)},setVoiceSpeed:function(e){o.a.setVoiceSpeed(e),null!=this.Speech&&this.Speech.setVoiceSpeed(e),null!=this.mp3Controls&&this.mp3Controls.setSpeed(e)},getVoiceSpeed:function(){return o.a.getVoiceSpeed()},setAnnounceLinks:function(e){o.a.setAnnounceLinks(e)},getAnnounceLinks:function(){return o.a.getAnnounceLinks()},setContinuousSpeechEnabled:function(e){o.a.setContinuousSpeechEnabled(e),this.Speech.setContinuousSpeechEnabled(e)},getContinuousSpeechEnabled:function(){return o.a.getContinuousSpeechEnabled()},setScreenMaskType:function(e){o.a.setScreenMaskType(e)},getScreenMaskType:function(){return o.a.getScreenMaskType()},setDocumentBodyTop:function(e){this.screenMask.setDocumentBodyTop(e)},setBackgroundColour:function(e){this.screenMask.setBackgroundColour(e),o.a.setBackgroundColour(e)},getBackgroundColour:function(){return o.a.getBackgroundColour()},setBackgroundOpacity:function(e){this.screenMask.setBackgroundOpacity(e),o.a.setBackgroundOpacity(e)},getBackgroundOpacity:function(){return o.a.getBackgroundOpacity()},setReadingLightHeight:function(e){this.screenMask.setReadingLightHeight(e),o.a.setReadingLightHeight(e)},getReadingLightHeight:function(){return o.a.getReadingLightHeight()},getReadingLightColour:function(){return o.a.getReadingLightColour()},setReadingLightColour:function(e){this.screenMask.setReadingLightColour(e),o.a.setReadingLightColour(e)},setReadingLightOpacity:function(e){this.screenMask.setReadingLightOpacity(e),o.a.setReadingLightOpacity(e)},getReadingLightOpacity:function(){return o.a.getReadingLightOpacity()},setReadingLightVisibility:function(e){this.screenMask.setReadingLightVisibility(e),o.a.setReadingLightVisibility(e)},getReadingLightVisibility:function(){return o.a.getReadingLightVisibility()},setScreenMaskSize:function(e){o.a.setScreenMaskSize(e)},getScreenMaskSize:function(){return o.a.getScreenMaskSize()},getScreenMaskColour:function(){o.a.getScreenMaskColour()},setScreenMaskColour:function(e){o.a.setScreenMaskColour(e)},setScreenMaskOpacity:function(e){o.a.setScreenMaskOpacity(e)},getScreenMaskOpacity:function(){return o.a.getScreenMaskOpacity()},setScreenMaskOnLoad:function(){var e=this,t=setInterval((function(){e.screenMask&&!e.screenMask.enabled&&(e.screenMask.enable(),clearInterval(t))}),100)},setTextMagnifierSize:function(e){o.a.setTextMagnifierSize(e)},getTextMagnifierSize:function(){return o.a.getTextMagnifierSize()},logAnalytics:function(e){var t=this,n=setInterval((function(){null!=t.analytics&&(t.analytics.log(e),clearInterval(n))}),100)}}},8:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var i={SPEECHSTREAMTOOLBAR:"SpeechstreamToolbar",SPEECH:"Speech",SPEECH_UTILS:"SpeechUtils",TRANSLATE:"Translate",DICTIONARY:"Dictionary",PICTURE_DICTIONARY:"Picture dictionary",HIGHLIGHT:"Highlight",CALCULATOR:"Calculator",VOCABULARY:"Vocabulary",STICKY_NOTES:"Sticky notes",PRONUNCIATION:"Pronunciation",SCREEN_MASKING:"Screen masking",PREDICTION:"Prediction",SPELLING:"Spelling",SPEECH_INPUT:"Speech input",MP3_MAKER:"MP3 maker",FACT_FINDER:"Fact finder",SIMPLIFY:"Simplify"},a={LOAD:"load",CLICKTOSPEAK:"clicktospeak",HOVER:"hover",CONTINUOUS_READING:"continuous reading",PLAY_BUTTON:"play",PAUSE_BUTTON:"pause",STOP_BUTTON:"stop",SPEAKBYID_BUTTON:"speak by ID",SPEAKFROMID_BUTTON:"speak from ID",SPEAKELEMENT_BUTTON:"speak Element",USER_SPEECH:"user",MATHML:"mathml",CLICK:"click",CLEAR:"clear",COLLECT:"collect",OPEN:"Open",ADD:"add",UPDATE:"update",DELETE:"delete",RETRIEVE:"retrieve",CREATE:"create",SIGNIN:"signin",SIGNEDIN:"successful signin",ARIA_MATH_ROLE_LABEL:"Aria math role label"}}}]);